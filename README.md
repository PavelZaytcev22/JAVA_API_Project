# üè† Smart Home Control System

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–º–Ω—ã–º –¥–æ–º–æ–º, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ **–æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (FastAPI)**, **Raspberry Pi-—à–ª—é–∑–∞** –∏ **–º–æ–±–∏–ª—å–Ω–æ–≥–æ Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**.  
–ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —É–º–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ –¥–æ–º–µ (—á–µ—Ä–µ–∑ Raspberry Pi)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–æ–º–æ–≤, –∫–æ–º–Ω–∞—Ç –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ JWT
- –†–∞–±–æ—Ç–∞ —Å MQTT –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ Raspberry

---

## üß© –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

üì± Android App
     ‚îÇ  (HTTP / HTTPS)
     ‚ñº
üåê FastAPI Server
 ‚îú‚îÄ‚îÄ Auth (JWT)
 ‚îú‚îÄ‚îÄ REST API
 ‚îú‚îÄ‚îÄ MQTT client
 ‚îú‚îÄ‚îÄ Automation Engine
 ‚îú‚îÄ‚îÄ SQLite Database
 ‚îî‚îÄ‚îÄ Push Notifications (FCM)
     ‚îÇ
     ‚ñº
üçì Raspberry Pi
 ‚îú‚îÄ‚îÄ Device Manager
 ‚îú‚îÄ‚îÄ State Storage (YAML)
 ‚îú‚îÄ‚îÄ Automation triggers
 ‚îî‚îÄ‚îÄ MQTT Publisher/Subscriber

---

## ‚öôÔ∏è –ü–æ–¥—Å–∏—Å—Ç–µ–º—ã

| –ü–æ–¥—Å–∏—Å—Ç–µ–º–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------------|------------|
| **FastAPI** | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, REST API, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è |
| **MQTT Service** | –°–≤—è–∑—å –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ Raspberry Pi |
| **Automation Engine** | –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–π –∏ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ |
| **Notifications** | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —á–µ—Ä–µ–∑ FCM |
| **SQLite (SQLAlchemy)** | –õ—ë–≥–∫–∞—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| **Raspberry Pi Client** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ |
| **Android Client** | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–æ–º |

---

## üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

**Backend (Server):**
- Python 3.13
- FastAPI
- SQLite + SQLAlchemy ORM
- paho-mqtt
- APScheduler
- Firebase Cloud Messaging (FCM)

**IoT (Raspberry Pi):**
- Python + paho-mqtt + yaml + gpiozero
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤ YAML

**Mobile (Android):**
- Java (Android SDK)
- Retrofit2 + Gson –¥–ª—è REST API
- Firebase SDK –¥–ª—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Material Design UI

---

## üîó –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—Ä–æ—Ç–æ–∫–æ–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------------|-----------|------------|
| **Android ‚Üî Server** | HTTP / HTTPS | –ó–∞–ø—Ä–æ—Å—ã REST API: –≤—Ö–æ–¥, —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –¥–µ–π—Å—Ç–≤–∏—è |
| **Server ‚Üî Raspberry Pi** | MQTT | –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤ |
| **Server ‚Üî Android** | FCM | Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö |
| **Raspberry Pi (–ª–æ–∫–∞–ª—å–Ω–æ)** | GPIO / Wi-Fi | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ |

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
uvicorn app.main:app --reload
```
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://127.0.0.1:8000/docs
```

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Raspberry Pi
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:
   ```bash
   pip install paho-mqtt
   ```
2. –£–∫–∞–∂–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—Ä–æ–∫–µ—Ä–∞ MQTT –∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ `config.yaml`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

### 3. Android –∫–ª–∏–µ–Ω—Ç
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `Retrofit2` –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤:
  - `POST /api/login` ‚Äî –≤—Ö–æ–¥
  - `GET /api/devices` ‚Äî —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
  - `POST /api/devices/{id}/action` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –•—Ä–∞–Ω–∏—Ç JWT-—Ç–æ–∫–µ–Ω –≤ `SharedPreferences`
- –ü–æ–ª—É—á–∞–µ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Firebase

---

## üîÆ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –õ—ë–≥–∫–∏–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å–µ—Ä–≤–µ—Ä FastAPI  
- MQTT –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–≤—è–∑—å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–∞ Raspberry  
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞  
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤  

---

## üìÑ –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞

**Smart Home Team**  
- üß† **Backend (FastAPI)** ‚Äî –ö–æ–Ω—è–µ–≤ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä (alexkonru)
- üì± **Android Client** ‚Äî –ö–∞–∑–∞–Ω—Ü–µ–≤ –ê–Ω—Ç–æ–Ω (tuchkaSoul)
- üçì **Raspberry Pi (IoT)** ‚Äî –ó–∞–π—Ü–µ–≤ –ü–∞–≤–µ–ª (PavelZaytsev22)  

